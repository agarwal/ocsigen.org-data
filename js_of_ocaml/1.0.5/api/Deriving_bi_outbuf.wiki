=Module <<a_api_type | module Deriving_bi_outbuf >> =
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<span class="ocsforge_color_uid"|<<span class="ocsforge_color_uid"|Deriving_bi_outbuf>>>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Deriving_bi_outbuf >><<span class="ocsforge_color_keyword"|end>>>>~Output buffer\\

----
<<pre class="ocsforge_color odocwiki_code" id="TYPEt"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|t>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|o_s:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|~Buffer string>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|o_max_len:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|~Same as <<span class="odocwiki_inlinecode"|~String~.length s>>>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|o_len:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|~Length of data already written ~= current position>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|o_init_len:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|~Initial length of the buffer>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|o_make_room:>> <<span class="odocwiki_type"|<<a_api text="t" | type Deriving_bi_outbuf.t >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<span class="odocwiki_inlinecode"|make~_room buf n>> must provide space for at least the requested
    number of bytes <<span class="odocwiki_inlinecode"|n>>~, typically by reallocating a larger buffer
    string or by flushing the data to a channel~.
    ~This function is only called when there is not enough space for <<span class="odocwiki_inlinecode"|n>>
    bytes~.>><<span class="odocwiki_comments_close"| ~*)>>>>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<pre id="VALreally_extend" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|really~_extend>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="t" | type Deriving_bi_outbuf.t >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Default make~_room function~: reallocate a larger buffer string~.\\
>>
<<pre id="VALflush_to_channel" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|flush~_to~_channel>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|out_channel>> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="t" | type Deriving_bi_outbuf.t >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Alternate make~_room function~: write to an out~_channel~.\\
>>
<<pre id="VALcreate" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|create>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?make_room: >><<span class="ocsforge_color_delimiter"| ( >><<a_api text="t" | type Deriving_bi_outbuf.t >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  int <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="t" | type Deriving_bi_outbuf.t >>>>>><<div class="odocwiki_info"|~Create a buffer~.  ~The default <<span class="odocwiki_inlinecode"|make~_room>> function is <<span class="odocwiki_inlinecode"|really~_extend>>~.\\
>>
<<pre id="VALcontents" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|contents>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="t" | type Deriving_bi_outbuf.t >> <<span class="ocsforge_color_delimiter"| -> >> string>>>><<div class="odocwiki_info"|~Returns the data currently in the buffer~.\\
>>
<<pre id="VALcreate_channel_writer" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|create~_channel~_writer>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_label"| ?len: >>int <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|out_channel>> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="t" | type Deriving_bi_outbuf.t >>>>>><<pre id="VALflush_channel_writer" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|flush~_channel~_writer>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="t" | type Deriving_bi_outbuf.t >> <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Pair of convenience functions for creating a buffer that
    flushes data to an out~_channel when it is full~.\\
>>
<<pre id="VALextend" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|extend>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="t" | type Deriving_bi_outbuf.t >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Guarantee that the buffer string has enough room for n additional bytes~.\\
>>
<<pre id="VALalloc" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|alloc>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="t" | type Deriving_bi_outbuf.t >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|alloc buf n>> makes room for <<span class="odocwiki_inlinecode"|n>> bytes and returns the position
    of the first byte in the buffer string <<span class="odocwiki_inlinecode"|buf~.s>>~.
    ~It behaves as if <<span class="odocwiki_inlinecode"|n>> arbitrary bytes were added and it is
    the user~'s responsibility to set them to some meaningful values
    by accessing <<span class="odocwiki_inlinecode"|buf~.s>> directly~.\\
>>
<<pre id="VALadd_string" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|add~_string>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="t" | type Deriving_bi_outbuf.t >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Add a string to the buffer~.\\
>>
<<pre id="VALadd_substring" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|add~_substring>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="t" | type Deriving_bi_outbuf.t >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|add~_substring dst src srcpos len>> copies <<span class="odocwiki_inlinecode"|len>> bytes from
     string <<span class="odocwiki_inlinecode"|src>> to buffer <<span class="odocwiki_inlinecode"|dst>> starting from position <<span class="odocwiki_inlinecode"|srcpos>>~.\\
>>
<<pre id="VALadd_char" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|add~_char>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="t" | type Deriving_bi_outbuf.t >> <<span class="ocsforge_color_delimiter"| -> >> char <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Add a byte to the buffer~.\\
>>
<<pre id="VALadd_char2" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|add~_char~2>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="t" | type Deriving_bi_outbuf.t >> <<span class="ocsforge_color_delimiter"| -> >> char <<span class="ocsforge_color_delimiter"| -> >> char <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Add two bytes to the buffer~.\\
>>
<<pre id="VALadd_char4" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|add~_char~4>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="t" | type Deriving_bi_outbuf.t >> <<span class="ocsforge_color_delimiter"| -> >> char <<span class="ocsforge_color_delimiter"| -> >> char <<span class="ocsforge_color_delimiter"| -> >> char <<span class="ocsforge_color_delimiter"| -> >> char <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Add four bytes to the buffer~.\\
>>
<<pre id="VALunsafe_add_char" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|unsafe~_add~_char>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="t" | type Deriving_bi_outbuf.t >> <<span class="ocsforge_color_delimiter"| -> >> char <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Add a byte to the buffer without checking that there is enough
     room for it~.\\
>>
<<pre id="VALclear" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|clear>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="t" | type Deriving_bi_outbuf.t >> <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Remove any data present in the buffer~.\\
>>
<<pre id="VALreset" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|reset>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="t" | type Deriving_bi_outbuf.t >> <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Remove any data present in the buffer~.\\
>>
