=Module <<a_api_type | module Lwt_read_line.Terminal >> =
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<span class="ocsforge_color_uid"|<<span class="ocsforge_color_uid"|Terminal>>>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Lwt_read_line.Terminal >><<span class="ocsforge_color_keyword"|end>>>>~Rendering to the terminal

----
<<pre class="ocsforge_color odocwiki_code" id="TYPEstate"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|state>>>><<div class="odocwiki_info"|~State of rendering
>>
<<pre id="VALinit" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|init>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="state" | type Lwt_read_line.Terminal.state >>>>>><<div class="odocwiki_info"|~Initial state
>>

~The following functions are the one used by read~-line functions
      of this module~.
<<pre class="ocsforge_color odocwiki_code" id="TYPEbox"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|box>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Box_none>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|~No box at all>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Box_empty>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|~An empty box>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Box_words>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<a_api text="Lwt_read_line.text_set" | type Lwt_read_line.text_set >> * int>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<span class="odocwiki_inlinecode"|~B~M~_words~(words~, position~)>> is a box with the given list
            of words~. <<span class="odocwiki_inlinecode"|position>> is the position of the selected word
            in the list~.~.>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Box_message>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|string>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|~A box containing only the given message>><<span class="odocwiki_comments_close"| ~*)>>>>>>>>>><<div class="odocwiki_info"|~Box for the completion~:
>>
<<pre id="VALdraw" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|draw>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| columns: >>int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?map_text: >><<span class="ocsforge_color_delimiter"| ( >><<span class="ocsforge_color_uid"|Text>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|Text>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?box: >><<a_api text="box" | type Lwt_read_line.Terminal.box >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| render_state: >><<a_api text="state" | type Lwt_read_line.Terminal.state >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| engine_state: >><<a_api text="Lwt_read_line.Engine.state" | type Lwt_read_line.Engine.state >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| prompt: >><<a_api text="Lwt_read_line.prompt" | type Lwt_read_line.prompt >> <<span class="ocsforge_color_delimiter"| -> >>\\  unit <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="Lwt_term.styled_text" | type Lwt_term.styled_text >> * <<a_api text="state" | type Lwt_read_line.Terminal.state >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|draw ~~column ~?map~_text ~?bar ~~render~_state ~~engine~_state
        prompt ~(~)>> returns <<span class="odocwiki_inlinecode"|~(text~, state~)>> where <<span class="odocwiki_inlinecode"|state>> is the new
        rendering state~, and <<span class="odocwiki_inlinecode"|text>> is a text containing escape
        sequences~. ~When printed~, it will update the displayed state~.
>>
<<div class="odocwiki_param_info"|<<span class="code"|map_text>> : is a function used to map user input before
          printing it~, for example to hide passwords~.>>
<<div class="odocwiki_param_info"|<<span class="code"|box>> : defaults to <<span class="odocwiki_inlinecode"|~Box~_none>>~.>>
<<pre id="VALlast_draw" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|last~_draw>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| columns: >>int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?map_text: >><<span class="ocsforge_color_delimiter"| ( >><<span class="ocsforge_color_uid"|Text>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|Text>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| render_state: >><<a_api text="state" | type Lwt_read_line.Terminal.state >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| engine_state: >><<a_api text="Lwt_read_line.Engine.state" | type Lwt_read_line.Engine.state >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| prompt: >><<a_api text="Lwt_read_line.prompt" | type Lwt_read_line.prompt >> <<span class="ocsforge_color_delimiter"| -> >> unit <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="Lwt_term.styled_text" | type Lwt_term.styled_text >>>>>><<div class="odocwiki_info"|~Draw for the last time~, i~.e~. the cursor is left after the text
        and not at current position~.
>>
<<pre id="VALerase" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|erase>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| columns: >>int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| render_state: >><<a_api text="state" | type Lwt_read_line.Terminal.state >> <<span class="ocsforge_color_delimiter"| -> >>\\  unit <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="Lwt_term.styled_text" | type Lwt_term.styled_text >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|erase ~~columns ~~render~_state ~(~)>> returns a text which will
        erase everything ~(the prompt~, user input~, completion~, ~.~.~.~)~.


        ~After an erase~, the rendering state is <<span class="odocwiki_inlinecode"|init>>~.
>>
