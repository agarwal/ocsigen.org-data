=Module <<a_api_type subproject="server" | module Os_date >> =
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<span class="ocsforge_color_uid"|<<span class="ocsforge_color_uid"|Os_date>>>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api subproject="server" text=".." | module Os_date >><<span class="ocsforge_color_keyword"|end>>>>~Time zone and date management for ~Web applications~.


    ~This module provides some useful functions to detect and manage
    time zones~, print dates~, etc~.


    ~It~'s essentially a wrapper to ~Calendar~Lib~.~Calendar~.t through an abstract
    type and by using zone and date data provided by the browser~.

----
<<pre class="ocsforge_color odocwiki_code" id="TYPElocal_calendar"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|local~_calendar>>>><<div class="odocwiki_info"|~Type representing a local calendar~.
>>
<<pre id="VALto_utc" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|to~_utc>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|CalendarLib>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Calendar>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>>>><<div class="odocwiki_info"|~Convert a local calendar to a ~U~T~C calendar
>>
<<pre id="VALto_local" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|to~_local>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|CalendarLib>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Calendar>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>> <<span class="ocsforge_color_delimiter"| -> >> <<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >>>>>><<div class="odocwiki_info"|~Convert a calendar to a local calendar~.
>>
<<pre id="VALnow" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|now>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> <<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >>>>>><<pre id="VALto_local_time" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|to~_local~_time>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|CalendarLib>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Time>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>>>><<pre id="VALto_local_date" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|to~_local~_date>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|CalendarLib>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Date>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>>>><<pre id="VALlocal_to_calendar" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|local~_to~_calendar>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|CalendarLib>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Calendar>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>>>><<pre id="VALlocal_from_calendar" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|local~_from~_calendar>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|CalendarLib>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Calendar>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>> <<span class="ocsforge_color_delimiter"| -> >> <<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >>>>>><<pre id="VALunknown_timezone" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|unknown~_timezone>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> bool>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|unknown~_timezone ~(~)>> returns <<span class="odocwiki_inlinecode"|true>> if the timezone is unknown~. ~Else
    returns <<span class="odocwiki_inlinecode"|false>>~.
>>
<<pre id="VALsmart_time" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|smart~_time>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_label"| ?now: >><<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >> <<span class="ocsforge_color_delimiter"| -> >> string>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|smart~_time ~~now date>> returns a smart description of
    <<span class="odocwiki_inlinecode"|local~_date>> comparing to <<span class="odocwiki_inlinecode"|now>> ~(default value of now is the current time
    when the function is called~)~. ~It does the same job than <<a_api subproject="server" | val Os_date.smart_date >> but
    « at ~%hour » is added at the end where ~%hour is computed from
    <<a_api subproject="server" | val Os_date.smart_hours_minutes >>~.
>>
<<pre id="VALsmart_date" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|smart~_date>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_label"| ?now: >><<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >> <<span class="ocsforge_color_delimiter"| -> >> string>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|smart~_date ~~now local~_date>> returns a smart description of <<span class="odocwiki_inlinecode"|local~_date>>
    comparing to <<span class="odocwiki_inlinecode"|now>> ~(default value of now is the current time when the
    function is called~)~.
    ~Smart means
* if <<span class="odocwiki_inlinecode"|local~_date>> is the day before <<span class="odocwiki_inlinecode"|now>>~, ~Yesterday is returned~.
* if <<span class="odocwiki_inlinecode"|local~_date>> is the same day than <<span class="odocwiki_inlinecode"|now>>~, ~Today is returned~.
* if <<span class="odocwiki_inlinecode"|local~_date>> is the day after <<span class="odocwiki_inlinecode"|now>>~, ~Tomorrow is returned~.
* ~In the other cases~, <<span class="odocwiki_inlinecode"|now>> and <<span class="odocwiki_inlinecode"|local~_date>> has the same year~,
    it returns the date in the format~: ~%~A ~%~B ~%d where
* ~%~A is the day name~.
* ~%~B is the month name~.
* ~%d is day of month~.
    ~Else the year is added at the end~.

>>
<<pre id="VALsmart_hours_minutes" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|smart~_hours~_minutes>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >> <<span class="ocsforge_color_delimiter"| -> >> string>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|smart~_hours~_minutes date>> returns the time in the format ~%~I~:~%~M~%~P where
* ~%~I is hour in the ~1~2 hours format~.
* ~%~M is minute~.
* ~%~P ~A~M or ~P~M
    ~If the timezone is unknown~, ~G~M~T is added~.

>>
<<pre id="VALsmart_interval" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|smart~_interval>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?now: >><<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >> <<span class="ocsforge_color_delimiter"| -> >> string>>>><<pre id="VALsmart_date_interval" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|smart~_date~_interval>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?now: >><<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api subproject="server" text="local_calendar" | type Os_date.local_calendar >> <<span class="ocsforge_color_delimiter"| -> >> string>>>>